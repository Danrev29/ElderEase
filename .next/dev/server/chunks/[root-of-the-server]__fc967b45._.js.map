{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 136, "column": 0}, "map": {"version":3,"sources":["file:///C:/ElderEase-main/ElderEase-main/src/firebaseConfig.ts"],"sourcesContent":["// /src/firebaseConfig.ts\r\nimport { initializeApp } from \"firebase/app\";\r\nimport { getAnalytics } from \"firebase/analytics\";\r\nimport { getFirestore } from \"firebase/firestore\";\r\n\r\n// Your web app's Firebase configuration\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyChc-fNM_AYvxINVNYEKWZhzsLuwseDLd0\",\r\n  authDomain: \"elderease-ef8ca.firebaseapp.com\",\r\n  projectId: \"elderease-ef8ca\",\r\n  storageBucket: \"elderease-ef8ca.appspot.com\",\r\n  messagingSenderId: \"594018006274\",\r\n  appId: \"1:594018006274:web:7cc3b24c3c8f0031f4fe1b\",\r\n  measurementId: \"G-B4EYPLNTQD\",\r\n};\r\n\r\n// Initialize Firebase\r\nconst app = initializeApp(firebaseConfig);\r\n\r\n// Initialize Firestore\r\nexport const db = getFirestore(app);\r\n\r\n// Initialize Analytics (optional)\r\nexport const analytics = getAnalytics(app);\r\n"],"names":[],"mappings":"AAAA,yBAAyB;;;;;;;AACzB;AAAA;AACA;AAAA;AACA;AAAA;;;;AAEA,wCAAwC;AACxC,MAAM,iBAAiB;IACrB,QAAQ;IACR,YAAY;IACZ,WAAW;IACX,eAAe;IACf,mBAAmB;IACnB,OAAO;IACP,eAAe;AACjB;AAEA,sBAAsB;AACtB,MAAM,MAAM,IAAA,wMAAa,EAAC;AAGnB,MAAM,KAAK,IAAA,wMAAY,EAAC;AAGxB,MAAM,YAAY,IAAA,6MAAY,EAAC","debugId":null}},
    {"offset": {"line": 170, "column": 0}, "map": {"version":3,"sources":["file:///C:/ElderEase-main/ElderEase-main/src/lib/auth-utils.ts"],"sourcesContent":["export {}; // ensures TS treats this as a module\n\nimport { doc, getDoc, setDoc, updateDoc } from \"firebase/firestore\";\nimport { db } from \"../firebaseConfig\"; // <-- FIXED PATH\nimport bcrypt from \"bcryptjs\";\n\n\nexport interface UserData {\n  email: string;\n  name: string;\n  password: string;\n  phone?: string;\n  birthYear?: string;\n}\n\nexport interface LoginData {\n  email: string;\n  password: string;\n}\n\nexport class AuthError extends Error {\n  constructor(message: string) {\n    super(message);\n    this.name = \"AuthError\";\n  }\n}\n\n// ----------------------\n// CREATE USER\n// ----------------------\nexport async function createUser(userData: UserData) {\n  try {\n    const userRef = doc(db, \"users\", userData.email);\n    const userSnap = await getDoc(userRef);\n\n    if (userSnap.exists()) {\n      throw new AuthError(\"User with this email already exists\");\n    }\n\n    const hashedPassword = await bcrypt.hash(userData.password, 12);\n\n    await setDoc(userRef, {\n      email: userData.email,\n      name: userData.name,\n      password: hashedPassword,\n      phone: userData.phone || \"\",\n      birthYear: userData.birthYear || \"\",\n      createdAt: Date.now(),\n    });\n\n    const prefRef = doc(db, \"userPreferences\", userData.email);\n    await setDoc(prefRef, {\n      fontSize: \"medium\",\n      contrast: \"normal\",\n      voiceEnabled: false,\n      tutorialSpeed: \"normal\",\n      reducedMotion: false,\n      simpleLayout: false,\n    });\n\n    const { password, ...userWithoutPassword } = userData;\n    return userWithoutPassword;\n  } catch (error) {\n    throw error;\n  }\n}\n\n// ----------------------\n// LOGIN\n// ----------------------\nexport async function verifyUser(loginData: LoginData) {\n  try {\n    const userRef = doc(db, \"users\", loginData.email);\n    const userSnap = await getDoc(userRef);\n\n    if (!userSnap.exists()) {\n      throw new AuthError(\"Invalid email or password\");\n    }\n\n    const userData = userSnap.data() as any;\n\n    const isValidPassword = await bcrypt.compare(\n      loginData.password,\n      userData.password\n    );\n\n    if (!isValidPassword) {\n      throw new AuthError(\"Invalid email or password\");\n    }\n\n    const { password, ...userWithoutPassword } = userData;\n    return userWithoutPassword;\n  } catch (error) {\n    throw error;\n  }\n}\n\n// ----------------------\n// GET USER WITH PREFERENCES\n// ----------------------\nexport async function getUserById(userId: string) {\n  try {\n    const userRef = doc(db, \"users\", userId);\n    const userSnap = await getDoc(userRef);\n\n    if (!userSnap.exists()) {\n      throw new AuthError(\"User not found\");\n    }\n\n    const userData = userSnap.data() as any;\n\n    const prefRef = doc(db, \"userPreferences\", userId);\n    const prefSnap = await getDoc(prefRef);\n\n    const prefData = prefSnap.exists() ? prefSnap.data() : {};\n\n    const combinedUser = {\n      ...userData,\n      preferences: prefData,\n    };\n\n    const { password, ...safeUser } = combinedUser;\n    return safeUser;\n  } catch (error) {\n    throw error;\n  }\n}\n\n// ----------------------\n// UPDATE PROFILE\n// ----------------------\nexport async function updateUserProfile(\n  userId: string,\n  updateData: {\n    name?: string;\n    email?: string;\n    phone?: string;\n    profilePhoto?: string;\n  }\n) {\n  try {\n    const userRef = doc(db, \"users\", userId);\n    await updateDoc(userRef, updateData);\n\n    const userSnap = await getDoc(userRef);\n    const user = userSnap.data() as any;\n\n    const { password, ...safeUser } = user;\n    return safeUser;\n  } catch (error) {\n    throw error;\n  }\n}\n\n// ----------------------\n// UPDATE PREFERENCES\n// ----------------------\nexport async function updateUserPreferences(\n  userId: string,\n  preferences: any\n) {\n  try {\n    const prefRef = doc(db, \"userPreferences\", userId);\n    await setDoc(prefRef, preferences, { merge: true });\n\n    const newSnap = await getDoc(prefRef);\n    return newSnap.data();\n  } catch (error) {\n    throw error;\n  }\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 295, "column": 0}, "map": {"version":3,"sources":["file:///C:/ElderEase-main/ElderEase-main/src/app/api/auth/register/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\nimport { createUser, AuthError } from '@/lib/auth-utils';\n\nexport async function POST(request: NextRequest) {\n  try {\n    const body: {\n      email?: string;\n      name?: string;\n      password?: string;\n      phone?: string;\n      birthYear?: string;\n    } = await request.json();\n\n    const { email, name, password, phone, birthYear } = body;\n\n    // Basic validation\n    if (!email || !name || !password) {\n      return NextResponse.json(\n        { error: 'Email, name, and password are required' },\n        { status: 400 }\n      );\n    }\n\n    const user = await createUser({\n      email,\n      name,\n      password,\n      phone,\n      birthYear,\n    });\n\n    return NextResponse.json(\n      {\n        message: 'User created successfully',\n        user,\n      },\n      { status: 201 }\n    );\n  } catch (err) {\n    const error = err as Error;\n\n    if (error instanceof AuthError) {\n      return NextResponse.json(\n        { error: error.message },\n        { status: 400 }\n      );\n    }\n\n    console.error('Registration error:', error.message);\n    return NextResponse.json(\n      { error: 'Internal server error' },\n      { status: 500 }\n    );\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,OAMF,MAAM,QAAQ,IAAI;QAEtB,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,QAAQ,EAAE,KAAK,EAAE,SAAS,EAAE,GAAG;QAEpD,mBAAmB;QACnB,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,UAAU;YAChC,OAAO,qKAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAyC,GAClD;gBAAE,QAAQ;YAAI;QAElB;QAEA,MAAM,OAAO,MAAM,IAAA,gKAAU,EAAC;YAC5B;YACA;YACA;YACA;YACA;QACF;QAEA,OAAO,qKAAY,CAAC,IAAI,CACtB;YACE,SAAS;YACT;QACF,GACA;YAAE,QAAQ;QAAI;IAElB,EAAE,OAAO,KAAK;QACZ,MAAM,QAAQ;QAEd,IAAI,iBAAiB,+JAAS,EAAE;YAC9B,OAAO,qKAAY,CAAC,IAAI,CACtB;gBAAE,OAAO,MAAM,OAAO;YAAC,GACvB;gBAAE,QAAQ;YAAI;QAElB;QAEA,QAAQ,KAAK,CAAC,uBAAuB,MAAM,OAAO;QAClD,OAAO,qKAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAwB,GACjC;YAAE,QAAQ;QAAI;IAElB;AACF","debugId":null}}]
}