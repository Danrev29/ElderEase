{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/ElderEase-main/ElderEase-main/src/app/tutoriallibrary/page.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useState, useEffect } from 'react'\r\nimport tutorials from './tutorialData'\r\nimport './tutoriallibrary.css'\r\nimport { useAuthState } from \"react-firebase-hooks/auth\";\r\nimport { auth, db } from \"@/lib/firebaseConfig\";\r\nimport { doc, getDoc, setDoc } from \"firebase/firestore\";\r\n\r\nexport default function TutorialLibrary() {\r\n  const [search, setSearch] = useState('')\r\n  const [filter, setFilter] = useState('All')\r\n  const [favorites, setFavorites] = useState<string[]>([])\r\n  const [completed, setCompleted] = useState<string[]>([])\r\n  const [selectedTutorial, setSelectedTutorial] = useState<any>(null)\r\n  const [dropdownOpen, setDropdownOpen] = useState(false)\r\n\r\n  const [user, loading, error] = useAuthState(auth);\r\n\r\n  // Load user data from Firestore if logged in\r\n  useEffect(() => {\r\n    if (!user) return\r\n\r\n    const fetchUserData = async () => {\r\n      const docRef = doc(db, \"users\", user.uid);\r\n      const docSnap = await getDoc(docRef);\r\n      if (docSnap.exists()) {\r\n        const data = docSnap.data();\r\n        setFavorites(data.favorites || []);\r\n        setCompleted(data.completed || []);\r\n      } else {\r\n        await setDoc(docRef, { favorites: [], completed: [] });\r\n      }\r\n    };\r\n    fetchUserData();\r\n  }, [user]);\r\n\r\n  // Save user data only if logged in\r\n  const saveUserData = async (updatedFavorites: string[], updatedCompleted: string[]) => {\r\n    if (!user) return\r\n    const docRef = doc(db, \"users\", user.uid);\r\n    await setDoc(docRef, { favorites: updatedFavorites, completed: updatedCompleted }, { merge: true });\r\n  };\r\n\r\n  const toggleFavorite = async (id: string) => {\r\n    if (!user) {\r\n      alert('Please log in to save favorites.');\r\n      return; \r\n    }\r\n    const updated = favorites.includes(id)\r\n      ? favorites.filter(f => f !== id)\r\n      : [...favorites, id];\r\n    setFavorites(updated);\r\n    await saveUserData(updated, completed);\r\n  };\r\n\r\n  const toggleCompleted = async (id: string) => {\r\n    if (!user) {\r\n      alert('Please log in to mark tutorials as completed.');\r\n      return;\r\n    }\r\n    const updated = completed.includes(id)\r\n      ? completed.filter(c => c !== id)\r\n      : [...completed, id];\r\n    setCompleted(updated);\r\n    await saveUserData(favorites, updated);\r\n  };\r\n\r\n  if (loading) return <p>Loading...</p>;\r\n  if (!user) return <p className=\"text-center mt-20 text-xl\">Please log in to access tutorials.</p>;\r\n\r\n  // Filter tutorials\r\n  const filteredTutorials = tutorials.filter(t =>\r\n    (filter === 'All' || t.category === filter) &&\r\n    t.title.toLowerCase().includes(search.toLowerCase())\r\n  );\r\n\r\n  return (\r\n    <div className=\"bg-white min-h-screen w-full p-8 relative\">\r\n\r\n      {/* Header */}\r\n      <div className=\"max-w-6xl mx-auto mb-6\">\r\n        <h1 className=\"text-4xl font-bold text-gray-900 mb-1\">Tutorial Library</h1>\r\n        <p className=\"text-lg text-gray-600 mb-2\">\r\n          Learn social media step-by-step with easy tutorials.\r\n        </p>\r\n        <p className=\"text-sm text-gray-700 mb-6\">\r\n          Completed {completed.length} / {tutorials.length} tutorials &nbsp;|&nbsp; \r\n          Bookmarked {favorites.length}\r\n        </p>\r\n\r\n        {/* Search + Filters */}\r\n        <div className=\"flex flex-wrap gap-4 mb-8 text-black relative\">\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Search tutorials...\"\r\n            className=\"px-4 py-2 border rounded-lg flex-1 text-black placeholder-gray-400\"\r\n            value={search}\r\n            onChange={(e) => setSearch(e.target.value)}\r\n            onFocus={() => setDropdownOpen(true)}\r\n            onBlur={() => setTimeout(() => setDropdownOpen(false), 200)} // delay to allow click\r\n          />\r\n          <select\r\n            className=\"px-4 py-2 border rounded-lg\"\r\n            value={filter}\r\n            onChange={(e) => setFilter(e.target.value)}\r\n          >\r\n            <option>All</option>\r\n            <option>Facebook</option>\r\n            <option>Messenger</option>\r\n            <option>WhatsApp</option>\r\n            <option>YouTube</option>\r\n            <option>TikTok</option>\r\n            <option>Instagram</option>\r\n          </select>\r\n\r\n          {/* Search Dropdown */}\r\n          {dropdownOpen && search && (\r\n            <div className=\"absolute top-full left-0 right-0 bg-white border border-gray-300 rounded-lg shadow-lg z-50 max-h-64 overflow-y-auto mt-1\">\r\n              {filteredTutorials.length === 0 ? (\r\n                <p className=\"p-3 text-gray-500\">No tutorials found.</p>\r\n              ) : (\r\n                filteredTutorials.map(tutorial => (\r\n                  <div\r\n                    key={tutorial.id}\r\n                    className=\"flex justify-between items-center px-4 py-2 hover:bg-gray-100 cursor-pointer\"\r\n                    onClick={() => setSelectedTutorial(tutorial)}\r\n                  >\r\n                    <span>{tutorial.title}</span>\r\n                    <span className=\"flex gap-2\">\r\n                      {user && favorites.includes(tutorial.id) && <span className=\"text-yellow-400\">★</span>}\r\n                      {user && completed.includes(tutorial.id) && <span className=\"text-green-500\">✔</span>}\r\n                    </span>\r\n                  </div>\r\n                ))\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Tutorial Cards */}\r\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6\">\r\n        {filteredTutorials.map(tutorial => (\r\n          <div\r\n            key={tutorial.id}\r\n            className=\"bg-white rounded-xl shadow-lg hover:shadow-2xl transition cursor-pointer p-5 border border-gray-100\"\r\n            onClick={() => setSelectedTutorial(tutorial)}\r\n          >\r\n            <img\r\n              src={tutorial.image}\r\n              className=\"w-full h-60  rounded-lg mb-4\"\r\n            />\r\n            <h2 className=\"text-xl font-bold text-gray-800\">{tutorial.title}</h2>\r\n            <p className=\"text-gray-600 text-sm mt-1\">{tutorial.description}</p>\r\n\r\n            {/* Bookmark & Completed */}\r\n            <div className=\"flex justify-between items-center mt-4\">\r\n              {/* Bookmark */}\r\n              <button\r\n                className={`flex items-center gap-1 px-3 py-1 rounded-lg text-sm transition ${\r\n                  user && favorites.includes(tutorial.id) ? 'bg-yellow-400 text-white' : 'bg-gray-200 text-gray-700'\r\n                }`}\r\n                onClick={(e) => { e.stopPropagation(); toggleFavorite(tutorial.id) }}\r\n                disabled={!user}\r\n                title={!user ? 'Log in to bookmark' : ''}\r\n              >\r\n                ★ {user && favorites.includes(tutorial.id) ? 'Bookmarked' : 'Bookmark'}\r\n              </button>\r\n\r\n              {/* Completed */}\r\n              <button\r\n                className={`px-3 py-1 rounded-lg text-sm transition ${\r\n                  user && completed.includes(tutorial.id) ? 'bg-green-500 text-white' : 'bg-gray-800 text-white'\r\n                }`}\r\n                onClick={(e) => { e.stopPropagation(); toggleCompleted(tutorial.id) }}\r\n                disabled={!user}\r\n                title={!user ? 'Log in to mark as done' : ''}\r\n              >\r\n                {user && completed.includes(tutorial.id) ? 'Completed ✔' : 'Mark as Done'}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Modal */}\r\n      {selectedTutorial && (\r\n        <div\r\n          className=\"fixed inset-0 flex items-center justify-center z-50 p-4 \"\r\n          onClick={() => setSelectedTutorial(null)}\r\n        >\r\n          <div\r\n            className=\"bg-white rounded-xl shadow-lg w-full max-w-4xl p-6 relative transform transition-all duration-300 scale-95 opacity-0 animate-modalOpen z-10 border-2 border-black\"\r\n            onClick={(e) => e.stopPropagation()}\r\n          >\r\n            <button\r\n              className=\"absolute top-4 right-4 text-black text-xl font-bold\"\r\n              onClick={() => setSelectedTutorial(null)}\r\n            >\r\n              ×\r\n            </button>\r\n\r\n            <h2 className=\"text-3xl font-bold mb-6 text-black\">{selectedTutorial.title}</h2>\r\n            <p className=\"mb-6 text-black\">{selectedTutorial.description}</p>\r\n\r\n            {selectedTutorial.steps && selectedTutorial.steps.map((step: any, index: number) => (\r\n              <div key={index} className=\"mb-7\">\r\n                <h3 className=\"font-semibold mb-4 text-black\">Step {index + 1}</h3>\r\n                <p className=\"mb-4 text-black\">{step.text}</p>\r\n                {step.image && <img src={step.image} className=\"w-full rounded-lg mb-2\" />}\r\n              </div>\r\n            ))}\r\n\r\n            {selectedTutorial.video && (\r\n              <div className=\"mt-6\">\r\n                <p className=\"font-semibold mb-2 text-black\">Video Tutorial:</p>\r\n                <a href={selectedTutorial.video} target=\"_blank\" className=\"text-blue-600 underline\">\r\n                  Watch on YouTube\r\n                </a>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}