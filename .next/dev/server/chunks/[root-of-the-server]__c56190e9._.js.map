{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/ElderEase-main/ElderEase-main/src/lib/firebaseAdmin.ts"],"sourcesContent":["import admin from 'firebase-admin';\r\nimport serviceAccountJson from './firebaseAdmin/serviceAccountKey.json';\r\nimport { ServiceAccount } from 'firebase-admin';\r\n\r\nconst serviceAccount = serviceAccountJson as ServiceAccount;\r\n\r\nif (!admin.apps.length) {\r\n  admin.initializeApp({\r\n    credential: admin.credential.cert(serviceAccount),\r\n  });\r\n}\r\n\r\nexport const adminAuth = admin.auth();\r\nexport const adminDb = admin.firestore();\r\n"],"names":[],"mappings":";;;;;;AAAA;;;;;;;;AAIA,MAAM,iBAAiB;AAEvB,IAAI,CAAC,sIAAK,CAAC,IAAI,CAAC,MAAM,EAAE;IACtB,sIAAK,CAAC,aAAa,CAAC;QAClB,YAAY,sIAAK,CAAC,UAAU,CAAC,IAAI,CAAC;IACpC;AACF;AAEO,MAAM,YAAY,sIAAK,CAAC,IAAI;AAC5B,MAAM,UAAU,sIAAK,CAAC,SAAS","debugId":null}},
    {"offset": {"line": 72, "column": 0}, "map": {"version":3,"sources":["file:///C:/ElderEase-main/ElderEase-main/src/app/api/auth/register/route.ts"],"sourcesContent":["// src/app/api/auth/register/route.ts\nimport { NextRequest, NextResponse } from 'next/server';\nimport { adminAuth, adminDb } from '@/lib/firebaseAdmin';\n\nexport async function POST(request: NextRequest) {\n  try {\n    const { email, name, password, phone, birthYear } = await request.json();\n\n    if (!email || !name || !password) {\n      return NextResponse.json({ error: 'Email, name, and password are required' }, { status: 400 });\n    }\n\n    // Create user with Firebase Admin\n    const userRecord = await adminAuth.createUser({\n      email,\n      password,\n      displayName: name,\n    });\n\n    // Save additional info in Firestore\n    await adminDb.collection('users').doc(userRecord.uid).set({\n      id: userRecord.uid,\n      email,\n      name,\n      phone: phone || '',\n      birthYear: birthYear || '',\n      profilePhoto: '',\n      createdAt: new Date().toISOString(),\n    });\n\n    return NextResponse.json({\n      message: 'User created successfully',\n      user: {\n        id: userRecord.uid,\n        email,\n        name,\n        phone: phone || '',\n        birthYear: birthYear || '',\n      },\n    }, { status: 201 });\n\n  } catch (err: any) {\n    console.error('Registration error:', err);\n\n    if (err.code === 'auth/email-already-exists') {\n      return NextResponse.json({ error: 'Email already in use' }, { status: 400 });\n    }\n\n    return NextResponse.json({ error: 'Internal server error' }, { status: 500 });\n  }\n}\n"],"names":[],"mappings":"AAAA,qCAAqC;;;;;AACrC;AACA;;;AAEO,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,QAAQ,EAAE,KAAK,EAAE,SAAS,EAAE,GAAG,MAAM,QAAQ,IAAI;QAEtE,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,UAAU;YAChC,OAAO,qKAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAyC,GAAG;gBAAE,QAAQ;YAAI;QAC9F;QAEA,kCAAkC;QAClC,MAAM,aAAa,MAAM,+JAAS,CAAC,UAAU,CAAC;YAC5C;YACA;YACA,aAAa;QACf;QAEA,oCAAoC;QACpC,MAAM,6JAAO,CAAC,UAAU,CAAC,SAAS,GAAG,CAAC,WAAW,GAAG,EAAE,GAAG,CAAC;YACxD,IAAI,WAAW,GAAG;YAClB;YACA;YACA,OAAO,SAAS;YAChB,WAAW,aAAa;YACxB,cAAc;YACd,WAAW,IAAI,OAAO,WAAW;QACnC;QAEA,OAAO,qKAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,MAAM;gBACJ,IAAI,WAAW,GAAG;gBAClB;gBACA;gBACA,OAAO,SAAS;gBAChB,WAAW,aAAa;YAC1B;QACF,GAAG;YAAE,QAAQ;QAAI;IAEnB,EAAE,OAAO,KAAU;QACjB,QAAQ,KAAK,CAAC,uBAAuB;QAErC,IAAI,IAAI,IAAI,KAAK,6BAA6B;YAC5C,OAAO,qKAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAuB,GAAG;gBAAE,QAAQ;YAAI;QAC5E;QAEA,OAAO,qKAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAwB,GAAG;YAAE,QAAQ;QAAI;IAC7E;AACF","debugId":null}}]
}