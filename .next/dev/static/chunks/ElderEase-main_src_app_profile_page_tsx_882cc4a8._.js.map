{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["C:/ElderEase-main/ElderEase-main/src/app/profile/page.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\nimport { useRouter } from 'next/navigation'\nimport { doc, getDoc, setDoc } from 'firebase/firestore'\nimport { \n  updatePassword, \n  reauthenticateWithCredential, \n  EmailAuthProvider, \n  verifyBeforeUpdateEmail, \n  signOut \n} from 'firebase/auth'\nimport app, { auth, db } from '@/lib/firebaseConfig'\nimport tutorials from '@/tutoriallibrary/tutorialData' // adjust path\n\ninterface UserProfile {\n  id: string\n  name: string\n  email: string\n  phone: string\n  profilePhoto?: string\n}\n\nexport default function Profile() {\n  const router = useRouter()\n  const [profile, setProfile] = useState<UserProfile>({ id: '', name: '', email: '', phone: '' })\n  const [isEditing, setIsEditing] = useState(false)\n  const [isChangingPassword, setIsChangingPassword] = useState(false)\n  const [isChangingEmail, setIsChangingEmail] = useState(false)\n  const [passwordData, setPasswordData] = useState({ currentPassword: '', newPassword: '', confirmPassword: '' })\n  const [emailData, setEmailData] = useState({ newEmail: '', currentPassword: '' })\n  const [message, setMessage] = useState('')\n  const [isSaving, setIsSaving] = useState(false)\n  const [isUploadingPhoto, setIsUploadingPhoto] = useState(false)\n  const [loaded, setLoaded] = useState(false)\n  const [completed, setCompleted] = useState<string[]>([])\n  const [favorites, setFavorites] = useState<string[]>([])\n  const totalTutorials = tutorials.length\n\n  useEffect(() => { loadUserProfile() }, [])\n\n  const loadUserProfile = async () => {\n    try {\n      const user = auth.currentUser\n      const userId = user?.uid || localStorage.getItem('elderease_user_id')\n      if (!userId) return router.push('/login')\n\n      const snap = await getDoc(doc(db, 'users', userId))\n      if (snap.exists()) {\n        const data = { id: userId, ...snap.data() } as UserProfile\n        setProfile(data)\n        setCompleted(snap.data().completed || [])\n        setFavorites(snap.data().favorites || [])\n        localStorage.setItem('elderease_user', JSON.stringify(data))\n        localStorage.setItem('elderease_user_id', userId)\n        setLoaded(true)\n      } else setMessage('Profile not found.')\n    } catch (err) {\n      console.error(err)\n      setMessage('Error loading profile')\n    }\n  }\n\n  const handleProfileChange = (e: React.ChangeEvent<HTMLInputElement>) =>\n    setProfile({ ...profile, [e.target.name]: e.target.value })\n\n  const handleSaveProfile = async (e: React.FormEvent) => {\n    e.preventDefault()\n    setIsSaving(true)\n    try {\n      const userId = profile.id\n      if (!userId) return setMessage('User not found.')\n\n      await setDoc(doc(db, 'users', userId), {\n        name: profile.name,\n        phone: profile.phone,\n        profilePhoto: profile.profilePhoto || null\n      }, { merge: true })\n\n      localStorage.setItem('elderease_user', JSON.stringify(profile))\n      setMessage('Profile updated!')\n      setIsEditing(false)\n    } catch (err) {\n      console.error(err)\n      setMessage('Error saving profile')\n    } finally {\n      setIsSaving(false)\n      setTimeout(() => setMessage(''), 3000)\n    }\n  }\n\n  const handleProfilePhotoUpload = async (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (!file) return;\n    setIsUploadingPhoto(true);\n\n    try {\n      const formData = new FormData();\n      formData.append('file', file);\n      formData.append('upload_preset', 'unsigned_preset'); // e.g., 'profile_upload'\n\n      // Replace with your Cloud name\n      const cloudName = 'dv6kpdk7n';\n\n      const res = await fetch(`https://api.cloudinary.com/v1_1/${cloudName}/image/upload`, {\n        method: 'POST',\n        body: formData,\n      });\n\n      const data = await res.json();\n      if (!data.secure_url) throw new Error('Upload failed');\n\n      const updatedProfile = { ...profile, profilePhoto: data.secure_url };\n      setProfile(updatedProfile);\n\n      const userId = profile.id;\n      if (userId) await setDoc(doc(db, 'users', userId), { profilePhoto: data.secure_url }, { merge: true });\n\n      localStorage.setItem('elderease_user', JSON.stringify(updatedProfile));\n      setMessage('Profile photo updated!');\n\n    } catch (err) {\n      console.error(err);\n      setMessage('Error uploading photo');\n    } finally {\n      setIsUploadingPhoto(false);\n      setTimeout(() => setMessage(''), 3000);\n    }\n  };\n\n  const handleEmailChange = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!auth.currentUser) return setMessage('No logged-in user.');\n    if (!emailData.newEmail || !emailData.currentPassword) return setMessage('Fill in both fields.');\n\n    try {\n      const credential = EmailAuthProvider.credential(auth.currentUser.email!, emailData.currentPassword);\n      await reauthenticateWithCredential(auth.currentUser, credential);\n      await verifyBeforeUpdateEmail(auth.currentUser, emailData.newEmail);\n\n      const userId = profile.id;\n      if (userId) await setDoc(doc(db, 'users', userId), { email: emailData.newEmail }, { merge: true });\n\n      setMessage('Verification email sent. Logging out in 3 seconds...');\n      setTimeout(async () => {\n        localStorage.clear();\n        await signOut(auth);\n        router.push('/login');\n      }, 3000);\n\n    } catch (err: any) {\n      console.error(err);\n      if (err.code === 'auth/wrong-password') setMessage('Wrong password.');\n      else if (err.code === 'auth/email-already-in-use') setMessage('Email already in use.');\n      else setMessage('Error updating email.');\n    } finally {\n      setTimeout(() => setMessage(''), 5000);\n    }\n  };\n\n  const handleChangePassword = async (e: React.FormEvent) => {\n    e.preventDefault()\n    if (!auth.currentUser) return setMessage('No logged-in user.')\n    if (passwordData.newPassword !== passwordData.confirmPassword) return setMessage('Passwords do not match.')\n\n    try {\n      const credential = EmailAuthProvider.credential(auth.currentUser.email!, passwordData.currentPassword)\n      await reauthenticateWithCredential(auth.currentUser, credential)\n      await updatePassword(auth.currentUser, passwordData.newPassword)\n      setMessage('Password updated successfully!')\n      setPasswordData({ currentPassword: '', newPassword: '', confirmPassword: '' })\n      setIsChangingPassword(false)\n    } catch (err: any) {\n      console.error(err)\n      if (err.code === 'auth/wrong-password') setMessage('Current password is incorrect.')\n      else setMessage('Error changing password.')\n    } finally {\n      setTimeout(() => setMessage(''), 4000)\n    }\n  }\n\n  const handleLogout = async () => {\n    localStorage.clear()\n    await signOut(auth)\n    router.push('/login')\n  }\n\n  if (!loaded) return <div className=\"flex justify-center items-center h-screen text-gray-600\">Loading...</div>\n\n  return (\n    <div className=\"min-h-screen bg-white py-10 px-6 grid grid-cols-1 md:grid-cols-3 gap-8\">\n      {/* Left Column: Profile */}\n      <div className=\"md:col-span-2 space-y-6\">\n        <div className=\"p-6 bg-white rounded-3xl shadow-lg border border-gray-200\">\n          <div className=\"flex justify-between items-center mb-6\">\n            <button onClick={() => router.push('/')} className=\"text-blue-500 font-medium hover:underline\">‚Üê Home</button>\n            <h1 className=\"text-2xl font-bold text-gray-800\">Profile</h1>\n            <button onClick={handleLogout} className=\"text-red-500 font-medium hover:underline\">Logout</button>\n          </div>\n\n          {message && <div className={`p-3 mb-4 rounded ${message.includes('Error') ? 'bg-red-100 text-red-700' : 'bg-green-100 text-green-700'}`}>{message}</div>}\n\n          {/* Profile Photo */}\n          <div className=\"flex flex-col items-center mb-6\">\n            <div className=\"w-28 h-28 rounded-full overflow-hidden border-4 border-gray-200 shadow-lg\">\n              {profile.profilePhoto\n                ? <img src={profile.profilePhoto} alt=\"Profile\" className=\"w-full h-full object-cover\" />\n                : <span className=\"text-gray-400 text-4xl flex justify-center items-center h-full\">üë§</span>}\n            </div>\n            <input type=\"file\" id=\"profilePhoto\" className=\"hidden\" accept=\"image/*\" onChange={handleProfilePhotoUpload} disabled={isUploadingPhoto} />\n            <label htmlFor=\"profilePhoto\" className={`mt-3 px-4 py-2 rounded-full ${isUploadingPhoto ? 'bg-gray-300 cursor-not-allowed' : 'bg-blue-500 hover:bg-blue-600 cursor-pointer'} text-white font-medium`}>\n              {isUploadingPhoto ? 'Uploading...' : 'Change Photo'}\n            </label>\n          </div>\n\n          {/* Profile Info */}\n          <div className=\"space-y-4 text-black\">\n            {['name', 'phone'].map(field => (\n              <div key={field}>\n                <label className=\"block text-sm font-medium text-gray-800 capitalize\">{field}</label>\n                <input\n                  type=\"text\"\n                  name={field}\n                  value={profile[field as keyof UserProfile] || ''}\n                  onChange={handleProfileChange}\n                  disabled={!isEditing}\n                  className={`mt-1 w-full px-3 py-2 rounded-xl border ${isEditing ? 'border-blue-400 focus:ring-2 focus:ring-blue-400' : 'border-gray-300'} focus:outline-none transition bg-white`}\n                />\n              </div>\n            ))}\n\n            {isEditing ? (\n              <form onSubmit={handleSaveProfile} className=\"flex justify-between mt-4\">\n                <button\n                  type=\"submit\"\n                  className=\"bg-green-500 text-white px-4 py-2 rounded-full hover:bg-green-600 transition flex items-center justify-center\"\n                  disabled={isSaving}\n                >\n                  {isSaving ? 'Saving...' : 'Save'}\n                </button>\n              </form>\n            ) : (\n              <button type=\"button\" onClick={() => setIsEditing(true)} className=\"bg-blue-500 text-white px-4 py-2 rounded-full hover:bg-blue-600 transition mt-4\">\n                Edit Profile\n              </button>\n            )}\n          </div>\n\n          {/* Email & Password */}\n          <div className=\"mt-6 pt-6 border-t space-y-4\">\n            {/* Email Change */}\n            <div>\n              <button \n                onClick={() => setIsChangingEmail(!isChangingEmail)} \n                className=\"bg-purple-500 text-white px-4 py-2 rounded-full hover:bg-purple-600 transition w-full mb-2\"\n              >\n                {isChangingEmail ? 'Cancel Email Change' : 'Change Email'}\n              </button>\n\n              {isChangingEmail && (\n                <form onSubmit={handleEmailChange} className=\"space-y-2 text-black\">\n                  <input type=\"email\" value={profile.email} readOnly className=\"mt-1 w-full px-3 py-2 rounded-xl border border-gray-300 bg-gray-100 cursor-not-allowed focus:outline-none transition\" />\n                  <input type=\"email\" placeholder=\"New Email\" value={emailData.newEmail} onChange={(e) => setEmailData({ ...emailData, newEmail: e.target.value })} className=\"mt-1 w-full px-3 py-2 rounded-xl border border-gray-300 focus:outline-none focus:ring-2 focus:ring-purple-400 transition\" required />\n                  <input type=\"password\" placeholder=\"Current Password\" value={emailData.currentPassword} onChange={(e) => setEmailData({ ...emailData, currentPassword: e.target.value })} className=\"mt-1 w-full px-3 py-2 rounded-xl border border-gray-300 focus:outline-none focus:ring-2 focus:ring-purple-400 transition\" required />\n                  <button type=\"submit\" className=\"bg-purple-500 text-white px-4 py-2 rounded-full hover:bg-purple-600 transition w-full\">Update Email</button>\n                </form>\n              )}\n            </div>\n\n            {/* Password Change */}\n            <div>\n              <button \n                onClick={() => setIsChangingPassword(!isChangingPassword)} \n                className=\"bg-yellow-500 text-white px-4 py-2 rounded-full hover:bg-yellow-600 transition w-full mb-2\"\n              >\n                {isChangingPassword ? 'Cancel Password Change' : 'Change Password'}\n              </button>\n\n              {isChangingPassword && (\n                <form onSubmit={handleChangePassword} className=\"space-y-2 text-black\">\n                  {['currentPassword', 'newPassword', 'confirmPassword'].map(field => (\n                    <div key={field}>\n                      <input type=\"password\" name={field} value={passwordData[field as keyof typeof passwordData]} onChange={(e) => setPasswordData({ ...passwordData, [field]: e.target.value })} placeholder={field.replace(/([A-Z])/g, ' $1')} className=\"mt-1 w-full px-3 py-2 rounded-xl border border-gray-300 focus:outline-none focus:ring-2 focus:ring-yellow-400 transition\" required />\n                    </div>\n                  ))}\n                  <button type=\"submit\" className=\"bg-green-500 text-white px-4 py-2 rounded-full hover:bg-green-600 transition w-full\">Update Password</button>\n                </form>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Right Column: Progress / Motivation */}\n      <div className=\"md:col-span-1 sticky top-8 space-y-6\">\n        <div className=\"p-6 bg-gray-50 rounded-2xl shadow-lg border border-gray-200\">\n          <h2 className=\"text-xl font-bold mb-4\">Learning Progress</h2>\n\n          {/* Progress Bar */}\n          <div className=\"mb-4\">\n            <div className=\"flex justify-between mb-1 text-sm text-gray-600\">\n              <span>Completed Tutorials</span>\n              <span>{completed.length} / {totalTutorials}</span>\n            </div>\n            <div className=\"w-full h-4 bg-gray-200 rounded-full\">\n              <div className=\"h-4 bg-green-500 rounded-full transition-all\" style={{ width: `${(completed.length / totalTutorials) * 100}%` }} />\n            </div>\n          </div>\n\n          {/* Badges */}\n          <div className=\"mb-4\">\n            <h3 className=\"font-semibold mb-2\">Achievements</h3>\n            <div className=\"flex flex-wrap gap-2\">\n              {completed.length > 0 ? <span className=\"px-2 py-1 bg-yellow-100 text-yellow-800 rounded-full text-xs\">First Steps</span> : <span className=\"px-2 py-1 bg-gray-100 text-gray-500 rounded-full text-xs\">No badges yet</span>}\n              {completed.length >= 5 && <span className=\"px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs\">5 Tutorials Completed</span>}\n              {completed.length >= 10 && <span className=\"px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs\">10 Tutorials Completed</span>}\n            </div>\n          </div>\n\n          {/* Motivational messages */}\n          <div className=\"mb-2\">\n            <h3 className=\"font-semibold mb-2\">Motivation</h3>\n            <ul className=\"list-disc list-inside text-gray-700 text-sm\">\n              {completed.length === 0 && <li>Start your first tutorial today!</li>}\n              {completed.length > 0 && completed.length < totalTutorials && <li>Keep going! You‚Äôre making progress.</li>}\n              {completed.length === totalTutorials && <li>Awesome! You completed all tutorials! üéâ</li>}\n            </ul>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":["useState","useEffect","useRouter","doc","getDoc","setDoc","updatePassword","reauthenticateWithCredential","EmailAuthProvider","verifyBeforeUpdateEmail","signOut","app","auth","db","tutorials","UserProfile","id","name","email","phone","profilePhoto","Profile","router","profile","setProfile","isEditing","setIsEditing","isChangingPassword","setIsChangingPassword","isChangingEmail","setIsChangingEmail","passwordData","setPasswordData","currentPassword","newPassword","confirmPassword","emailData","setEmailData","newEmail","message","setMessage","isSaving","setIsSaving","isUploadingPhoto","setIsUploadingPhoto","loaded","setLoaded","completed","setCompleted","favorites","setFavorites","totalTutorials","length","loadUserProfile","user","currentUser","userId","uid","localStorage","getItem","push","snap","exists","data","setItem","JSON","stringify","err","console","error","handleProfileChange","e","React","ChangeEvent","HTMLInputElement","target","value","handleSaveProfile","FormEvent","preventDefault","merge","setTimeout","handleProfilePhotoUpload","file","files","formData","FormData","append","cloudName","res","fetch","method","body","json","secure_url","Error","updatedProfile","handleEmailChange","credential","clear","code","handleChangePassword","handleLogout","includes","map","field","replace","width"],"mappings":";;;;;AAEA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,SAASC,SAAS,QAAQ,iBAAiB;AAC3C,SAASC,GAAG,EAAEC,MAAM,EAAEC,MAAM,QAAQ,oBAAoB;;;AACxD,SACEC,cAAc,EACdC,4BAA4B,EAC5BC,iBAAiB,EACjBC,uBAAuB,EACvBC,OAAO,QACF,eAAe;AACtB,OAAOC,GAAG,IAAIC,IAAI,EAAEC,EAAE,QAAQ,sBAAsB;;;;;;;;AAZpD,YAAY;;;;;;;AAuBG;;IACb,MAAMS,MAAM,OAAGpB;IACf,MAAM,CAACqB,OAAO,EAAEC,UAAU,CAAC,GAAGxB,kMAAQ,CAACe,CAAa,UAAF,CAAC;QAAGC,EAAE,EAAE,EAAE;QAAEC,IAAI,EAAE,EAAE;QAAEC,KAAK,EAAE,EAAE;QAAEC,KAAK,EAAE;IAAG,CAAC,CAAC;IAC/F,MAAM,CAACM,SAAS,EAAEC,YAAY,CAAC,GAAG1B,kMAAQ,EAAC,KAAK,CAAC;IACjD,MAAM,CAAC2B,kBAAkB,EAAEC,qBAAqB,CAAC,OAAG5B,8LAAQ,EAAC,KAAK,CAAC;IACnE,MAAM,CAAC6B,eAAe,EAAEC,kBAAkB,CAAC,GAAG9B,kMAAQ,EAAC,KAAK,CAAC;IAC7D,MAAM,CAAC+B,YAAY,EAAEC,eAAe,CAAC,OAAGhC,8LAAQ,EAAC;QAAEiC,eAAe,EAAE,EAAE;QAAEC,WAAW,EAAE,EAAE;QAAEC,eAAe,EAAE;IAAG,CAAC,CAAC;IAC/G,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,OAAGrC,8LAAQ,EAAC;QAAEsC,QAAQ,EAAE,EAAE;QAAEL,eAAe,EAAE;IAAG,CAAC,CAAC;IACjF,MAAM,CAACM,OAAO,EAAEC,UAAU,CAAC,OAAGxC,8LAAQ,EAAC,EAAE,CAAC;IAC1C,MAAM,CAACyC,QAAQ,EAAEC,WAAW,CAAC,OAAG1C,8LAAQ,EAAC,KAAK,CAAC;IAC/C,MAAM,CAAC2C,gBAAgB,EAAEC,mBAAmB,CAAC,OAAG5C,8LAAQ,EAAC,KAAK,CAAC;IAC/D,MAAM,CAAC6C,MAAM,EAAEC,SAAS,CAAC,OAAG9C,8LAAQ,EAAC,KAAK,CAAC;IAC3C,MAAM,CAAC+C,SAAS,EAAEC,YAAY,CAAC,OAAGhD,8LAAQ,CAAC,CAAU,EAAE,CAAC,EAAP,EAAE,CAAC;IACpD,MAAM,CAACiD,SAAS,EAAEC,YAAY,CAAC,OAAGlD,8LAAQ,CAAC,CAAU,EAAE,CAAC,EAAP,EAAE,CAAC;IACpD,MAAMmD,cAAc,GAAGrC,SAAS,CAACsC,MAAM;IAEvCnD,mMAAS;6BAAC,MAAM;YAAEoD,eAAe,CAAC,CAAC;QAAC,CAAC;4BAAE,EAAE,CAAC;IAE1C,MAAMA,eAAe,GAAG,MAAAA,CAAA,KAAY;QAClC,IAAI;YACF,MAAMC,IAAI,GAAG1C,4JAAI,CAAC2C,WAAW;YAC7B,MAAMC,MAAM,GAAGF,IAAI,EAAEG,GAAG,IAAIC,YAAY,CAACC,OAAO,CAAC,mBAAmB,CAAC;YACrE,IAAI,CAACH,MAAM,EAAE,OAAOlC,MAAM,CAACsC,IAAI,CAAC,QAAQ,CAAC;YAEzC,MAAMC,IAAI,GAAG,UAAMzD,iMAAM,MAACD,8LAAG,EAACU,0JAAE,EAAE,OAAO,EAAE2C,MAAM,CAAC,CAAC;YACnD,IAAIK,IAAI,CAACC,MAAM,CAAC,CAAC,EAAE;gBACjB,MAAMC,IAAI,GAAG;oBAAE/C,EAAE,EAAEwC,MAAM;oBAAE,GAAGK,IAAI,CAACE,IAAI,CAAC,CAAA;gBAAE,CAAC,IAAIhD,WAAW;gBAC1DS,UAAU,CAACuC,IAAI,CAAC;gBAChBf,YAAY,CAACa,IAAI,CAACE,IAAI,CAAC,CAAC,CAAChB,SAAS,IAAI,EAAE,CAAC;gBACzCG,YAAY,CAACW,IAAI,CAACE,IAAI,CAAC,CAAC,CAACd,SAAS,IAAI,EAAE,CAAC;gBACzCS,YAAY,CAACM,OAAO,CAAC,gBAAgB,EAAEC,IAAI,CAACC,SAAS,CAACH,IAAI,CAAC,CAAC;gBAC5DL,YAAY,CAACM,OAAO,CAAC,mBAAmB,EAAER,MAAM,CAAC;gBACjDV,SAAS,CAAC,IAAI,CAAC;YACjB,CAAC,MAAMN,UAAU,CAAC,oBAAoB,CAAC;QACzC,CAAC,CAAC,OAAO2B,GAAG,EAAE;YACZC,OAAO,CAACC,KAAK,CAACF,GAAG,CAAC;YAClB3B,UAAU,CAAC,uBAAuB,CAAC;QACrC;IACF,CAAC;IAED,MAAM8B,mBAAmB,GAAGA,CAACC,CAAC,EAAEC,CAC9BhD,IADmC,CAACiD,KAC1B,CAAC,KADoC,CAACC,gBAAgB,CAAC;YACpD,GAAGnD,OAAO;YAAE,CAACgD,CAAC,CAACI,MAAM,CAAC1D,IAAI,CAAA,EAAGsD,CAAC,CAACI,MAAM,CAACC,KAAAA;QAAM,CAAC,CAAC;IAE7D,MAAMC,iBAAiB,GAAG,MAAAA,CAAON,GAAC,EAAEC,KAAK,CAACM,SAAS,KAAK;QACtDP,GAAC,CAACQ,cAAc,CAAC,CAAC;QAClBrC,WAAW,CAAC,IAAI,CAAC;QACjB,IAAI;YACF,MAAMc,QAAM,GAAGjC,OAAO,CAACP,EAAE;YACzB,IAAI,CAACwC,QAAM,EAAE,OAAOhB,UAAU,CAAC,iBAAiB,CAAC;YAEjD,UAAMnC,iMAAM,MAACF,8LAAG,EAACU,0JAAE,EAAE,OAAO,EAAE2C,QAAM,CAAC,EAAE;gBACrCvC,IAAI,EAAEM,OAAO,CAACN,IAAI;gBAClBE,KAAK,EAAEI,OAAO,CAACJ,KAAK;gBACpBC,YAAY,EAAEG,OAAO,CAACH,YAAY,IAAI;YACxC,CAAC,EAAE;gBAAE4D,KAAK,EAAE;YAAK,CAAC,CAAC;YAEnBtB,YAAY,CAACM,OAAO,CAAC,gBAAgB,EAAEC,IAAI,CAACC,SAAS,CAAC3C,OAAO,CAAC,CAAC;YAC/DiB,UAAU,CAAC,kBAAkB,CAAC;YAC9Bd,YAAY,CAAC,KAAK,CAAC;QACrB,CAAC,CAAC,OAAOyC,KAAG,EAAE;YACZC,OAAO,CAACC,KAAK,CAACF,KAAG,CAAC;YAClB3B,UAAU,CAAC,sBAAsB,CAAC;QACpC,CAAC,QAAS;YACRE,WAAW,CAAC,KAAK,CAAC;YAClBuC,UAAU,CAAC,IAAMzC,UAAU,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC;QACxC;IACF,CAAC;IAED,MAAM0C,wBAAwB,GAAG,MAAAA,CAAOX,GAAC,EAAEC,KAAK,CAACC,WAAW,CAACC,gBAAgB,CAAC,KAAK;QACjF,MAAMS,IAAI,GAAGZ,GAAC,CAACI,MAAM,CAACS,KAAK,EAAA,CAAG,CAAC,CAAC;QAChC,IAAI,CAACD,IAAI,EAAE;QACXvC,mBAAmB,CAAC,IAAI,CAAC;QAEzB,IAAI;YACF,MAAMyC,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;YAC/BD,QAAQ,CAACE,MAAM,CAAC,MAAM,EAAEJ,IAAI,CAAC;YAC7BE,QAAQ,CAACE,MAAM,CAAC,eAAe,EAAE,iBAAiB,CAAC,CAAC,CAAC,yBAAA;YAErD,+BAAA;YACA,MAAMC,SAAS,GAAG,WAAW;YAE7B,MAAMC,GAAG,GAAG,MAAMC,KAAK,CAAC,CAAA,gCAAA,EAAmCF,SAAS,CAAA,aAAA,CAAe,EAAE;gBACnFG,MAAM,EAAE,MAAM;gBACdC,IAAI,EAAEP;YACR,CAAC,CAAC;YAEF,MAAMtB,MAAI,GAAG,MAAM0B,GAAG,CAACI,IAAI,CAAC,CAAC;YAC7B,IAAI,CAAC9B,MAAI,CAAC+B,UAAU,EAAE,MAAM,IAAIC,KAAK,CAAC,eAAe,CAAC;YAEtD,MAAMC,cAAc,GAAG;gBAAE,GAAGzE,OAAO;gBAAEH,YAAY,EAAE2C,MAAI,CAAC+B,UAAAA;YAAW,CAAC;YACpEtE,UAAU,CAACwE,cAAc,CAAC;YAE1B,MAAMxC,QAAM,GAAGjC,OAAO,CAACP,EAAE;YACzB,IAAIwC,QAAM,EAAE,UAAMnD,iMAAM,MAACF,8LAAG,EAACU,0JAAE,EAAE,OAAO,EAAE2C,QAAM,CAAC,EAAE;gBAAEpC,YAAY,EAAE2C,MAAI,CAAC+B,UAAAA;YAAW,CAAC,EAAE;gBAAEd,KAAK,EAAE;YAAK,CAAC,CAAC;YAEtGtB,YAAY,CAACM,OAAO,CAAC,gBAAgB,EAAEC,IAAI,CAACC,SAAS,CAAC8B,cAAc,CAAC,CAAC;YACtExD,UAAU,CAAC,wBAAwB,CAAC;QAEtC,CAAC,CAAC,OAAO2B,KAAG,EAAE;YACZC,OAAO,CAACC,KAAK,CAACF,KAAG,CAAC;YAClB3B,UAAU,CAAC,uBAAuB,CAAC;QACrC,CAAC,QAAS;YACRI,mBAAmB,CAAC,KAAK,CAAC;YAC1BqC,UAAU,CAAC,IAAMzC,UAAU,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC;QACxC;IACF,CAAC;IAED,MAAMyD,iBAAiB,GAAG,MAAAA,CAAO1B,GAAC,EAAEC,KAAK,CAACM,SAAS,KAAK;QACtDP,GAAC,CAACQ,cAAc,CAAC,CAAC;QAClB,IAAI,CAACnE,4JAAI,CAAC2C,WAAW,EAAE,OAAOf,UAAU,CAAC,oBAAoB,CAAC;QAC9D,IAAI,CAACJ,SAAS,CAACE,QAAQ,IAAI,CAACF,SAAS,CAACH,eAAe,EAAE,OAAOO,UAAU,CAAC,sBAAsB,CAAC;QAEhG,IAAI;YACF,MAAM0D,UAAU,GAAG1F,uMAAiB,CAAC0F,UAAU,CAACtF,4JAAI,CAAC2C,WAAW,CAACrC,KAAK,CAAC,CAAEkB,SAAS,CAACH,eAAe,CAAC;YACnG,UAAM1B,kNAA4B,EAACK,4JAAI,CAAC2C,WAAW,EAAE2C,UAAU,CAAC;YAChE,UAAMzF,6MAAuB,EAACG,4JAAI,CAAC2C,WAAW,EAAEnB,SAAS,CAACE,QAAQ,CAAC;YAEnE,MAAMkB,QAAM,GAAGjC,OAAO,CAACP,EAAE;YACzB,IAAIwC,QAAM,EAAE,UAAMnD,iMAAM,MAACF,8LAAG,EAACU,0JAAE,EAAE,OAAO,EAAE2C,QAAM,CAAC,EAAE;gBAAEtC,KAAK,EAAEkB,SAAS,CAACE,QAAAA;YAAS,CAAC,EAAE;gBAAE0C,KAAK,EAAE;YAAK,CAAC,CAAC;YAElGxC,UAAU,CAAC,sDAAsD,CAAC;YAClEyC,UAAU,CAAC,YAAY;gBACrBvB,YAAY,CAACyC,KAAK,CAAC,CAAC;gBACpB,UAAMzF,6LAAO,EAACE,4JAAI,CAAC;gBACnBU,MAAM,CAACsC,IAAI,CAAC,QAAQ,CAAC;YACvB,CAAC,EAAE,IAAI,CAAC;QAEV,CAAC,CAAC,OAAOO,KAAG,EAAE,AAAK,GAAF;YACfC,OAAO,CAACC,KAAK,CAACF,KAAG,CAAC;YAClB,IAAIA,KAAG,CAACiC,IAAI,KAAK,qBAAqB,EAAE5D,UAAU,CAAC,iBAAiB,CAAC,CAAC;iBACjE,IAAI2B,KAAG,CAACiC,IAAI,KAAK,2BAA2B,EAAE5D,UAAU,CAAC,uBAAuB,CAAC,CAAC;iBAClFA,UAAU,CAAC,uBAAuB,CAAC;QAC1C,CAAC,QAAS;YACRyC,UAAU,CAAC,IAAMzC,UAAU,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC;QACxC;IACF,CAAC;IAED,MAAM6D,oBAAoB,GAAG,MAAAA,CAAO9B,GAAC,EAAEC,KAAK,CAACM,SAAS,KAAK;QACzDP,GAAC,CAACQ,cAAc,CAAC,CAAC;QAClB,IAAI,CAACnE,4JAAI,CAAC2C,WAAW,EAAE,OAAOf,UAAU,CAAC,oBAAoB,CAAC;QAC9D,IAAIT,YAAY,CAACG,WAAW,KAAKH,YAAY,CAACI,eAAe,EAAE,OAAOK,UAAU,CAAC,yBAAyB,CAAC;QAE3G,IAAI;YACF,MAAM0D,YAAU,GAAG1F,uMAAiB,CAAC0F,UAAU,CAACtF,4JAAI,CAAC2C,WAAW,CAACrC,KAAK,CAAC,CAAEa,YAAY,CAACE,eAAe,CAAC;YACtG,UAAM1B,kNAA4B,EAACK,4JAAI,CAAC2C,WAAW,EAAE2C,YAAU,CAAC;YAChE,UAAM5F,oMAAc,EAACM,4JAAI,CAAC2C,WAAW,EAAExB,YAAY,CAACG,WAAW,CAAC;YAChEM,UAAU,CAAC,gCAAgC,CAAC;YAC5CR,eAAe,CAAC;gBAAEC,eAAe,EAAE,EAAE;gBAAEC,WAAW,EAAE,EAAE;gBAAEC,eAAe,EAAE;YAAG,CAAC,CAAC;YAC9EP,qBAAqB,CAAC,KAAK,CAAC;QAC9B,CAAC,CAAC,OAAOuC,KAAG,EAAO,AAAL,GAAG;YACfC,OAAO,CAACC,KAAK,CAACF,KAAG,CAAC;YAClB,IAAIA,KAAG,CAACiC,IAAI,KAAK,qBAAqB,EAAE5D,UAAU,CAAC,gCAAgC,CAAC;iBAC/EA,UAAU,CAAC,0BAA0B,CAAC;QAC7C,CAAC,QAAS;YACRyC,UAAU,CAAC,IAAMzC,UAAU,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC;QACxC;IACF,CAAC;IAED,MAAM8D,YAAY,GAAG,MAAAA,CAAA,KAAY;QAC/B5C,YAAY,CAACyC,KAAK,CAAC,CAAC;QACpB,UAAMzF,6LAAO,EAACE,4JAAI,CAAC;QACnBU,MAAM,CAACsC,IAAI,CAAC,QAAQ,CAAC;IACvB,CAAC;IAED,IAAI,CAACf,MAAM,EAAE,qBAAO,kNAAC,GAAG;QAAC,SAAS,EAAC,yDAAyD;kBAAC,UAAU,EAAE,GAAG,CAAC;;;;;;IAE7G,qBACE,kNAAC,GAAG;QAAC,SAAS,EAAC,wEAAwE;;0BAErF,kNAAC,GAAG;gBAAC,SAAS,EAAC,yBAAyB;0BACtC,gOAAC,GAAG;oBAAC,SAAS,EAAC,2DAA2D;;sCACxE,kNAAC,GAAG;4BAAC,SAAS,EAAC,wCAAwC;;8CACrD,kNAAC,MAAM;oCAAC,OAAO,CAAC,CAAC,IAAMvB,MAAM,CAACsC,IAAI,CAAC,GAAG,CAAC,CAAC;oCAAC,SAAS,EAAC,2CAA2C;8CAAC,MAAM,EAAE,MAAM;;;;;;8CAC7G,kNAAC,EAAE;oCAAC,SAAS,EAAC,kCAAkC;8CAAC,OAAO,EAAE,EAAE;;;;;;8CAC5D,kNAAC,MAAM;oCAAC,OAAO,CAAC,CAAC0C,YAAY,CAAC;oCAAC,SAAS,EAAC,0CAA0C;8CAAC,MAAM,EAAE,MAAM;;;;;;;;;;;;wBAGnG/D,OAAO,kBAAI,kNAAC,GAAG;4BAAC,SAAS,CAAC,CAAC,CAAA,iBAAA,EAAoBA,OAAO,CAACgE,QAAQ,CAAC,OAAO,CAAC,GAAG,yBAAyB,GAAG,6BAA6B,EAAE,CAAC,CAAC;sCAAChE,OAAO,CAAC,EAAE,GAAG,CAAC;;;;;;sCAGxJ,kNAAC,GAAG;4BAAC,SAAS,EAAC,iCAAiC;;8CAC9C,kNAAC,GAAG;oCAAC,SAAS,EAAC,2EAA2E;8CACvFhB,OAAO,CAACH,YAAY,iBACjB,kNAAC,GAAG;wCAAC,GAAG,CAAC,CAACG,OAAO,CAACH,YAAY,CAAC;wCAAC,GAAG,EAAC,SAAS;wCAAC,SAAS,EAAC,4BAA4B,GAAG;;;;;6DACvF,kNAAC,IAAI;wCAAC,SAAS,EAAC,gEAAgE;kDAAC,EAAE,EAAE,IAAI,CAAC;;;;;;;;;;;8CAEhG,kNAAC,KAAK;oCAAC,IAAI,EAAC,MAAM;oCAAC,EAAE,EAAC,cAAc;oCAAC,SAAS,EAAC,QAAQ;oCAAC,MAAM,EAAC,SAAS;oCAAC,QAAQ,CAAC,CAAC8D,wBAAwB,CAAC;oCAAC,QAAQ,CAAC,CAACvC,gBAAgB,CAAC;;;;;;8CACxI,kNAAC,KAAK;oCAAC,OAAO,EAAC,cAAc;oCAAC,SAAS,CAAC,CAAC,CAAA,4BAAA,EAA+BA,gBAAgB,GAAG,gCAAgC,GAAG,8CAA8C,CAAA,uBAAA,CAAyB,CAAC;8CACnMA,gBAAgB,GAAG,cAAc,GAAG,cAAc;;;;;;;;;;;;sCAKvD,kNAAC,GAAG;4BAAC,SAAS,EAAC,sBAAsB;;gCAClC;oCAAC,MAAM;oCAAE,OAAO;iCAAC,CAAC6D,GAAG,EAACC,KAAK,iBAC1B,kNAAC,GAAG,CAAC,GAAG,CAAC;;0DACP,kNAAC,KAAK;gDAAC,SAAS,EAAC,oDAAoD,CAAC;0DAACA,KAAK,CAAC,EAAE,KAAK;;;;;;0DACpF,kNAAC,KAAK;gDACJ,IAAI,EAAC,MAAM;gDACX,IAAI,CAAC,CAACA,KAAK,CAAC;gDACZ,KAAK,CAAC,CAAClF,OAAO,CAACkF,KAAK,CAAsB,GAAlB,CAAsB,EAAE,CAAC,EAAnB1F,WAAW;gDACzC,QAAQ,CAAC,CAACuD,mBAAmB,CAAC;gDAC9B,QAAQ,CAAC,CAAC,CAAC7C,SAAS,CAAC;gDACrB,SAAS,CAAC,CAAC,CAAA,wCAAA,EAA2CA,SAAS,GAAG,kDAAkD,GAAG,iBAAiB,CAAA,uCAAA,CAAyC,CAAC;;;;;;;uCAR5KgF,KAAK,CAAC;;;;;gCAajBhF,SAAS,iBACR,kNAAC,IAAI;oCAAC,QAAQ,CAAC,CAACoD,iBAAiB,CAAC;oCAAC,SAAS,EAAC,2BAA2B;4DACtE,kNAAC,MAAM;wCACL,IAAI,EAAC,QAAQ;wCACb,SAAS,EAAC,+GAA+G;wCACzH,QAAQ,CAAC,CAACpC,QAAQ,CAAC;kDAElBA,QAAQ,GAAG,WAAW,GAAG,MAAM;;;;;;;;;;yDAIpC,kNAAC,MAAM;oCAAC,IAAI,EAAC,QAAQ;oCAAC,OAAO,CAAC,CAAC,IAAMf,YAAY,CAAC,IAAI,CAAC,CAAC;oCAAC,SAAS,EAAC,iFAAiF;8CAAA;;;;;;;;;;;;sCAOxJ,kNAAC,GAAG;4BAAC,SAAS,EAAC,8BAA8B;;8CAE3C,kNAAC,GAAG;;sDACF,kNAAC,MAAM;4CACL,OAAO,CAAC,CAAC,IAAMI,kBAAkB,CAAC,CAACD,eAAe,CAAC,CAAC;4CACpD,SAAS,EAAC,4FAA4F;sDAErGA,eAAe,GAAG,qBAAqB,GAAG,cAAc;;;;;;wCAG1DA,eAAe,kBACd,kNAAC,IAAI;4CAAC,QAAQ,CAAC,CAACoE,iBAAiB,CAAC;4CAAC,SAAS,EAAC,sBAAsB;;8DACjE,kNAAC,KAAK;oDAAC,IAAI,EAAC,OAAO;oDAAC,KAAK,CAAC,CAAC1E,OAAO,CAACL,KAAK,CAAC;oDAAC,QAAQ;oDAAC,SAAS,EAAC,sHAAsH;;;;;;8DACnL,kNAAC,KAAK;oDAAC,IAAI,EAAC,OAAO;oDAAC,WAAW,EAAC,WAAW;oDAAC,KAAK,CAAC,CAACkB,SAAS,CAACE,QAAQ,CAAC;oDAAC,QAAQ,CAAC,EAAEiC,GAAC,GAAKlC,YAAY,CAAC;4DAAE,GAAGD,SAAS;4DAAEE,QAAQ,EAAEiC,GAAC,CAACI,MAAM,CAACC,KAAAA;wDAAM,CAAC,CAAC,CAAC;oDAAC,SAAS,EAAC,0HAA0H;oDAAC,QAAQ;;;;;;8DAC/R,kNAAC,KAAK;oDAAC,IAAI,EAAC,UAAU;oDAAC,WAAW,EAAC,kBAAkB;oDAAC,KAAK,CAAC,CAACxC,SAAS,CAACH,eAAe,CAAC;oDAAC,QAAQ,CAAC,EAAEsC,GAAC,GAAKlC,YAAY,CAAC;4DAAE,GAAGD,SAAS;4DAAEH,eAAe,EAAEsC,GAAC,CAACI,MAAM,CAACC,KAAAA;wDAAM,CAAC,CAAC,CAAC;oDAAC,SAAS,EAAC,0HAA0H;oDAAC,QAAQ;;;;;;8DACvT,kNAAC,MAAM;oDAAC,IAAI,EAAC,QAAQ;oDAAC,SAAS,EAAC,uFAAuF;8DAAC,YAAY,EAAE,MAAM;;;;;;;;;;;;;;;;;;8CAMlJ,kNAAC,GAAG;;sDACF,kNAAC,MAAM;4CACL,OAAO,CAAC,CAAC,IAAMhD,qBAAqB,CAAC,CAACD,kBAAkB,CAAC,CAAC;4CAC1D,SAAS,EAAC,4FAA4F;sDAErGA,kBAAkB,GAAG,wBAAwB,GAAG,iBAAiB;;;;;;wCAGnEA,kBAAkB,kBACjB,kNAAC,IAAI;4CAAC,QAAQ,CAAC,CAAC0E,oBAAoB,CAAC;4CAAC,SAAS,EAAC,sBAAsB;;gDACnE;oDAAC,iBAAiB;oDAAE,aAAa;oDAAE,iBAAiB;iDAAC,CAACG,GAAG,EAACC,OAAK,iBAC9D,kNAAC,GAAG,CAAC,GAAG,CAAC;kEACP,gOAAC,KAAK;4DAAC,IAAI,EAAC,UAAU;4DAAC,IAAI,CAAC,CAACA,OAAK,CAAC;4DAAC,KAAK,CAAC,CAAC1E,YAAY,CAAC0E,OAAK,CAA8B,CAAC,EAA3B,MAAM,OAAO1E,YAAY;4DAAG,QAAQ,CAAC,EAAEwC,GAAC,GAAKvC,eAAe,CAAC;oEAAE,GAAGD,YAAY;oEAAE,CAAC0E,OAAK,CAAA,EAAGlC,GAAC,CAACI,MAAM,CAACC,KAAAA;gEAAM,CAAC,CAAC,CAAC;4DAAC,WAAW,CAAC,CAAC6B,OAAK,CAACC,OAAO,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC;4DAAC,SAAS,EAAC,0HAA0H;4DAAC,QAAQ;;;;;;uDADjWD,OAAK,CAAC;;;;;8DAIlB,kNAAC,MAAM;oDAAC,IAAI,EAAC,QAAQ;oDAAC,SAAS,EAAC,qFAAqF;8DAAC,eAAe,EAAE,MAAM;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0BASzJ,kNAAC,GAAG;gBAAC,SAAS,EAAC,sCAAsC;wCACnD,kNAAC,GAAG;oBAAC,SAAS,EAAC,6DAA6D;;sCAC1E,kNAAC,EAAE;4BAAC,SAAS,EAAC,wBAAwB;sCAAC,iBAAiB,EAAE,EAAE;;;;;;sCAG5D,kNAAC,GAAG;4BAAC,SAAS,EAAC,MAAM;;8CACnB,kNAAC,GAAG;oCAAC,SAAS,EAAC,iDAAiD;;sDAC9D,kNAAC,IAAI;sDAAC,mBAAmB,EAAE,IAAI;;;;;;sDAC/B,kNAAC,IAAI,CAAC;;gDAAC1D,SAAS,CAACK,MAAM;gDAAC,GAAG;gDAACD,cAAc,CAAC,EAAE,IAAI;;;;;;;;;;;;;8CAEnD,kNAAC,GAAG;oCAAC,SAAS,EAAC,qCAAqC;8CAClD,gOAAC,GAAG;wCAAC,SAAS,EAAC,8CAA8C;wCAAC,KAAK,CAAC,CAAC;4CAAEwD,KAAK,EAAE,GAAI5D,SAAS,CAACK,MAAM,GAAGD,cAAc,GAAI,GAAG,CAAA,CAAA,CAAA;wCAAI,CAAC,CAAC;;;;;;;;;;;;;;;;;sCAKpI,kNAAC,GAAG;4BAAC,SAAS,EAAC,MAAM;;8CACnB,kNAAC,EAAE;oCAAC,SAAS,EAAC,oBAAoB;8CAAC,YAAY,EAAE,EAAE;;;;;;8CACnD,kNAAC,GAAG;oCAAC,SAAS,EAAC,sBAAsB;;wCAClCJ,SAAS,CAACK,MAAM,GAAG,CAAC,iBAAG,kNAAC,IAAI;4CAAC,SAAS,EAAC,8DAA8D;sDAAC,WAAW,EAAE,IAAI,CAAC;;;;;iEAAG,kNAAC,IAAI;4CAAC,SAAS,EAAC,0DAA0D;sDAAC,aAAa,EAAE,IAAI,CAAC;;;;;;wCAC1NL,SAAS,CAACK,MAAM,IAAI,CAAC,kBAAI,kNAAC,IAAI;4CAAC,SAAS,EAAC,4DAA4D;sDAAC,qBAAqB,EAAE,IAAI,CAAC;;;;;;wCAClIL,SAAS,CAACK,MAAM,IAAI,EAAE,kBAAI,kNAAC,IAAI;4CAAC,SAAS,EAAC,0DAA0D;sDAAC,sBAAsB,EAAE,IAAI,CAAC;;;;;;;;;;;;;;;;;;sCAKvI,kNAAC,GAAG;4BAAC,SAAS,EAAC,MAAM;;8CACnB,kNAAC,EAAE;oCAAC,SAAS,EAAC,oBAAoB;8CAAC,UAAU,EAAE,EAAE;;;;;;8CACjD,kNAAC,EAAE;oCAAC,SAAS,EAAC,6CAA6C;;wCACxDL,SAAS,CAACK,MAAM,KAAK,CAAC,kBAAI,kNAAC,EAAE;sDAAC,gCAAgC,EAAE,EAAE,CAAC;;;;;;wCACnEL,SAAS,CAACK,MAAM,GAAG,CAAC,IAAIL,SAAS,CAACK,MAAM,GAAGD,cAAc,kBAAI,kNAAC,EAAE;sDAAC,mCAAmC,EAAE,EAAE,CAAC;;;;;;wCACzGJ,SAAS,CAACK,MAAM,KAAKD,cAAc,kBAAI,kNAAC,EAAE;sDAAC,wCAAwC,EAAE,EAAE,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOvG;;;+KApT0B,CAAC,CAAC;;;KADJ9B,OAAOA,CAAA,EAAG","ignoreList":[],"debugId":null}}]
}